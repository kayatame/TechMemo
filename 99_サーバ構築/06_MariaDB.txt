○ インストール
# dnf install mariadb mariadb-server
# mysql -V


○ my.cnf調整
# cp -ip /etc/my.cnf.d/mariadb-server.cnf{,.org}
# vi /etc/my.cnf.d/mariadb-server.cnf
------------------------------------------------------------
character_set_server = utf8mb4
collation_server = utf8mb4_bin
long_query_time = 1
slow_query_log = 1
slow_query_log_file = /var/log/mariadb/slow_query.log
default-storage-engine = INNODB
max_connections = 500
------------------------------------------------------------
# diff /etc/my.cnf.d/mariadb-server.cnf{,.org}


○ 起動
# systemctl --now enable mariadb
# systemctl status mariadb
# systemctl is-enabled mariadb

MariaDBへの通信をローカルのみに制限する場合には下記設定を追加する
-------------------------
bind_address = 127.0.0.1
-------------------------
MySQL 8.0 Reference Manual(IPv6 ローカルホストアドレスを使用した接続)
https://dev.mysql.com/doc/refman/8.0/ja/ipv6-local-connections.html 

Red Hat Documentation(MariaDB の設定)
https://docs.redhat.com/ja/documentation/red_hat_enterprise_linux/9/html/configuring_and_using_database_servers/configuring-mariadb_using-mariadb


○ パスワード設定
# mysql_secure_installation

MariaDB Document(mysql_secure_installation)
https://mariadb.com/kb/ja/mysql_secure_installation/

MariaDB Document(Authentication Plugin - Unix Socket)
https://mariadb.com/kb/en/authentication-plugin-unix-socket/


○ 設定確認
# mysql
> SHOW GLOBAL VARIABLES LIKE '%time_zone';
> SHOW GLOBAL VARIABLES LIKE "collation%";
> SHOW GLOBAL VARIABLES LIKE "char%";
> SHOW GLOBAL VARIABLES LIKE 'slow_query%';
> SHOW GLOBAL VARIABLES LIKE 'log_error';
> SHOW GLOBAL VARIABLES LIKE 'max_connections';

MariaDBにおいてはログタイムゾーンの変数は設定されていない  
MariaDB Document(System Variable Differences Between MariaDB 10.3 and MySQL 5.7)
https://mariadb.com/kb/en/system-variable-differences-between-mariadb-10-3-and-mysql-5-7/


○ データベース/ユーザ作成
> CREATE DATABASE 'test_db';
> SHOW DATABASES LIKE 'test_db';

> CREATE USER 'user'@'localhost' IDENTIFIED BY '123456789';
> SELECT user, host FROM mysql.user WHERE User = 'user';

> GRANT ALL ON test_db.* TO 'user'@'localhost';
> SHOW GRANTS for 'user'@'localhost';

